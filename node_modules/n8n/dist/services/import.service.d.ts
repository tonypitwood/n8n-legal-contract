import { Logger } from '@n8n/backend-common';
import type { IWorkflowDb } from '@n8n/db';
import { CredentialsRepository, TagRepository } from '@n8n/db';
import { DataSource, EntityManager } from '@n8n/typeorm';
import { type IWorkflowBase } from 'n8n-workflow';
export declare class ImportService {
    private readonly logger;
    private readonly credentialsRepository;
    private readonly tagRepository;
    private readonly dataSource;
    private dbCredentials;
    private dbTags;
    private foreignKeyCommands;
    constructor(logger: Logger, credentialsRepository: CredentialsRepository, tagRepository: TagRepository, dataSource: DataSource);
    initRecords(): Promise<void>;
    importWorkflows(workflows: IWorkflowDb[], projectId: string): Promise<void>;
    replaceInvalidCreds(workflow: IWorkflowBase): Promise<void>;
    isTableEmpty(tableName: string): Promise<boolean>;
    areAllEntityTablesEmpty(tableNames: string[]): Promise<boolean>;
    truncateEntityTable(tableName: string, transactionManager: EntityManager): Promise<void>;
    getImportMetadata(inputDir: string): Promise<{
        tableNames: string[];
        entityFiles: Record<string, string[]>;
    }>;
    readEntityFile(filePath: string): Promise<unknown[]>;
    importEntities(inputDir: string, truncateTables: boolean): Promise<void>;
    importEntitiesFromFiles(inputDir: string, transactionManager: EntityManager, entityNames: string[], entityFiles: Record<string, string[]>): Promise<void>;
    private toNewCredentialFormat;
    disableForeignKeyConstraints(transactionManager: EntityManager): Promise<void>;
    enableForeignKeyConstraints(transactionManager: EntityManager): Promise<void>;
    validateMigrations(inputDir: string): Promise<void>;
}
