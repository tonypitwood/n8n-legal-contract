{"version":3,"sources":["../../../../../nodes/llms/LmChatAzureOpenAi/credentials/api-key.ts"],"sourcesContent":["import { NodeOperationError, OperationalError, type ISupplyDataFunctions } from 'n8n-workflow';\n\nimport type { AzureOpenAIApiKeyModelConfig } from '../types';\n\n/**\n * Handles API Key authentication setup for Azure OpenAI\n */\nexport async function setupApiKeyAuthentication(\n\tthis: ISupplyDataFunctions,\n\tcredentialName: string,\n): Promise<AzureOpenAIApiKeyModelConfig> {\n\ttry {\n\t\t// Get Azure OpenAI Config (Endpoint, Version, etc.)\n\t\tconst configCredentials = await this.getCredentials<{\n\t\t\tapiKey?: string;\n\t\t\tresourceName: string;\n\t\t\tapiVersion: string;\n\t\t\tendpoint?: string;\n\t\t}>(credentialName);\n\n\t\tif (!configCredentials.apiKey) {\n\t\t\tthrow new NodeOperationError(\n\t\t\t\tthis.getNode(),\n\t\t\t\t'API Key is missing in the selected Azure OpenAI API credential. Please configure the API Key or choose Entra ID authentication.',\n\t\t\t);\n\t\t}\n\n\t\tthis.logger.info('Using API Key authentication for Azure OpenAI.');\n\n\t\treturn {\n\t\t\tazureOpenAIApiKey: configCredentials.apiKey,\n\t\t\tazureOpenAIApiInstanceName: configCredentials.resourceName,\n\t\t\tazureOpenAIApiVersion: configCredentials.apiVersion,\n\t\t\tazureOpenAIEndpoint: configCredentials.endpoint,\n\t\t};\n\t} catch (error) {\n\t\tif (error instanceof OperationalError) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tthis.logger.error(`Error setting up API Key authentication: ${error.message}`, error);\n\n\t\tthrow new NodeOperationError(this.getNode(), 'Failed to retrieve API Key', error);\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAgF;AAOhF,eAAsB,0BAErB,gBACwC;AACxC,MAAI;AAEH,UAAM,oBAAoB,MAAM,KAAK,eAKlC,cAAc;AAEjB,QAAI,CAAC,kBAAkB,QAAQ;AAC9B,YAAM,IAAI;AAAA,QACT,KAAK,QAAQ;AAAA,QACb;AAAA,MACD;AAAA,IACD;AAEA,SAAK,OAAO,KAAK,gDAAgD;AAEjE,WAAO;AAAA,MACN,mBAAmB,kBAAkB;AAAA,MACrC,4BAA4B,kBAAkB;AAAA,MAC9C,uBAAuB,kBAAkB;AAAA,MACzC,qBAAqB,kBAAkB;AAAA,IACxC;AAAA,EACD,SAAS,OAAO;AACf,QAAI,iBAAiB,sCAAkB;AACtC,YAAM;AAAA,IACP;AAEA,SAAK,OAAO,MAAM,4CAA4C,MAAM,OAAO,IAAI,KAAK;AAEpF,UAAM,IAAI,uCAAmB,KAAK,QAAQ,GAAG,8BAA8B,KAAK;AAAA,EACjF;AACD;","names":[]}