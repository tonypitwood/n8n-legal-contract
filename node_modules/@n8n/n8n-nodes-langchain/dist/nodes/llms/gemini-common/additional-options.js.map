{"version":3,"sources":["../../../../nodes/llms/gemini-common/additional-options.ts"],"sourcesContent":["import type { HarmBlockThreshold, HarmCategory } from '@google/genai';\nimport type { INodeProperties } from 'n8n-workflow';\n\nimport { harmCategories, harmThresholds } from './safety-options';\n\nexport function getAdditionalOptions({\n\tsupportsThinkingBudget,\n}: { supportsThinkingBudget: boolean }) {\n\tconst baseOptions: INodeProperties = {\n\t\tdisplayName: 'Options',\n\t\tname: 'options',\n\t\tplaceholder: 'Add Option',\n\t\tdescription: 'Additional options to add',\n\t\ttype: 'collection',\n\t\tdefault: {},\n\t\toptions: [\n\t\t\t{\n\t\t\t\tdisplayName: 'Maximum Number of Tokens',\n\t\t\t\tname: 'maxOutputTokens',\n\t\t\t\tdefault: 2048,\n\t\t\t\tdescription: 'The maximum number of tokens to generate in the completion',\n\t\t\t\ttype: 'number',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Sampling Temperature',\n\t\t\t\tname: 'temperature',\n\t\t\t\tdefault: 0.4,\n\t\t\t\ttypeOptions: { maxValue: 1, minValue: 0, numberPrecision: 1 },\n\t\t\t\tdescription:\n\t\t\t\t\t'Controls randomness: Lowering results in less random completions. As the temperature approaches zero, the model will become deterministic and repetitive.',\n\t\t\t\ttype: 'number',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Top K',\n\t\t\t\tname: 'topK',\n\t\t\t\tdefault: 32,\n\t\t\t\ttypeOptions: { maxValue: 40, minValue: -1, numberPrecision: 1 },\n\t\t\t\tdescription:\n\t\t\t\t\t'Used to remove \"long tail\" low probability responses. Defaults to -1, which disables it.',\n\t\t\t\ttype: 'number',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdisplayName: 'Top P',\n\t\t\t\tname: 'topP',\n\t\t\t\tdefault: 1,\n\t\t\t\ttypeOptions: { maxValue: 1, minValue: 0, numberPrecision: 1 },\n\t\t\t\tdescription:\n\t\t\t\t\t'Controls diversity via nucleus sampling: 0.5 means half of all likelihood-weighted options are considered. We generally recommend altering this or temperature but not both.',\n\t\t\t\ttype: 'number',\n\t\t\t},\n\t\t\t// Safety Settings\n\t\t\t{\n\t\t\t\tdisplayName: 'Safety Settings',\n\t\t\t\tname: 'safetySettings',\n\t\t\t\ttype: 'fixedCollection',\n\t\t\t\ttypeOptions: { multipleValues: true },\n\t\t\t\tdefault: {\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\tcategory: harmCategories[0].name as HarmCategory,\n\t\t\t\t\t\tthreshold: harmThresholds[0].name as HarmBlockThreshold,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tplaceholder: 'Add Option',\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'values',\n\t\t\t\t\t\tdisplayName: 'Values',\n\t\t\t\t\t\tvalues: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdisplayName: 'Safety Category',\n\t\t\t\t\t\t\t\tname: 'category',\n\t\t\t\t\t\t\t\ttype: 'options',\n\t\t\t\t\t\t\t\tdescription: 'The category of harmful content to block',\n\t\t\t\t\t\t\t\tdefault: 'HARM_CATEGORY_UNSPECIFIED',\n\t\t\t\t\t\t\t\toptions: harmCategories,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdisplayName: 'Safety Threshold',\n\t\t\t\t\t\t\t\tname: 'threshold',\n\t\t\t\t\t\t\t\ttype: 'options',\n\t\t\t\t\t\t\t\tdescription: 'The threshold of harmful content to block',\n\t\t\t\t\t\t\t\tdefault: 'HARM_BLOCK_THRESHOLD_UNSPECIFIED',\n\t\t\t\t\t\t\t\toptions: harmThresholds,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t};\n\t// only supported in the new google genai SDK\n\tif (supportsThinkingBudget) {\n\t\tbaseOptions.options?.push({\n\t\t\tdisplayName: 'Thinking Budget',\n\t\t\tname: 'thinkingBudget',\n\t\t\tdefault: undefined,\n\t\t\tdescription:\n\t\t\t\t'Controls reasoning tokens for thinking models. Set to 0 to disable automatic thinking. Set to -1 for dynamic thinking. Leave empty for auto mode.',\n\t\t\ttype: 'number',\n\t\t\ttypeOptions: {\n\t\t\t\tminValue: -1,\n\t\t\t\tnumberPrecision: 0,\n\t\t\t},\n\t\t});\n\t}\n\treturn baseOptions;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,4BAA+C;AAExC,SAAS,qBAAqB;AAAA,EACpC;AACD,GAAwC;AACvC,QAAM,cAA+B;AAAA,IACpC,aAAa;AAAA,IACb,MAAM;AAAA,IACN,aAAa;AAAA,IACb,aAAa;AAAA,IACb,MAAM;AAAA,IACN,SAAS,CAAC;AAAA,IACV,SAAS;AAAA,MACR;AAAA,QACC,aAAa;AAAA,QACb,MAAM;AAAA,QACN,SAAS;AAAA,QACT,aAAa;AAAA,QACb,MAAM;AAAA,MACP;AAAA,MACA;AAAA,QACC,aAAa;AAAA,QACb,MAAM;AAAA,QACN,SAAS;AAAA,QACT,aAAa,EAAE,UAAU,GAAG,UAAU,GAAG,iBAAiB,EAAE;AAAA,QAC5D,aACC;AAAA,QACD,MAAM;AAAA,MACP;AAAA,MACA;AAAA,QACC,aAAa;AAAA,QACb,MAAM;AAAA,QACN,SAAS;AAAA,QACT,aAAa,EAAE,UAAU,IAAI,UAAU,IAAI,iBAAiB,EAAE;AAAA,QAC9D,aACC;AAAA,QACD,MAAM;AAAA,MACP;AAAA,MACA;AAAA,QACC,aAAa;AAAA,QACb,MAAM;AAAA,QACN,SAAS;AAAA,QACT,aAAa,EAAE,UAAU,GAAG,UAAU,GAAG,iBAAiB,EAAE;AAAA,QAC5D,aACC;AAAA,QACD,MAAM;AAAA,MACP;AAAA;AAAA,MAEA;AAAA,QACC,aAAa;AAAA,QACb,MAAM;AAAA,QACN,MAAM;AAAA,QACN,aAAa,EAAE,gBAAgB,KAAK;AAAA,QACpC,SAAS;AAAA,UACR,QAAQ;AAAA,YACP,UAAU,qCAAe,CAAC,EAAE;AAAA,YAC5B,WAAW,qCAAe,CAAC,EAAE;AAAA,UAC9B;AAAA,QACD;AAAA,QACA,aAAa;AAAA,QACb,SAAS;AAAA,UACR;AAAA,YACC,MAAM;AAAA,YACN,aAAa;AAAA,YACb,QAAQ;AAAA,cACP;AAAA,gBACC,aAAa;AAAA,gBACb,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,aAAa;AAAA,gBACb,SAAS;AAAA,gBACT,SAAS;AAAA,cACV;AAAA,cACA;AAAA,gBACC,aAAa;AAAA,gBACb,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,aAAa;AAAA,gBACb,SAAS;AAAA,gBACT,SAAS;AAAA,cACV;AAAA,YACD;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAEA,MAAI,wBAAwB;AAC3B,gBAAY,SAAS,KAAK;AAAA,MACzB,aAAa;AAAA,MACb,MAAM;AAAA,MACN,SAAS;AAAA,MACT,aACC;AAAA,MACD,MAAM;AAAA,MACN,aAAa;AAAA,QACZ,UAAU;AAAA,QACV,iBAAiB;AAAA,MAClB;AAAA,IACD,CAAC;AAAA,EACF;AACA,SAAO;AACR;","names":[]}