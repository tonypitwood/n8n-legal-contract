{"version":3,"sources":["../../../../../nodes/chains/ChainLLM/methods/responseFormatter.ts"],"sourcesContent":["import type { IDataObject } from 'n8n-workflow';\n\n/**\n * Formats the response from the LLM chain into a consistent structure\n */\nexport function formatResponse(response: unknown, returnUnwrappedObject: boolean): IDataObject {\n\tif (typeof response === 'string') {\n\t\treturn {\n\t\t\ttext: response.trim(),\n\t\t};\n\t}\n\n\tif (Array.isArray(response)) {\n\t\treturn {\n\t\t\tdata: response,\n\t\t};\n\t}\n\n\tif (response instanceof Object) {\n\t\tif (returnUnwrappedObject) {\n\t\t\treturn response as IDataObject;\n\t\t}\n\n\t\t// If the response is an object and we are not unwrapping it, we need to stringify it\n\t\t// to be backwards compatible with older versions of the chain(< 1.6)\n\t\treturn {\n\t\t\ttext: JSON.stringify(response),\n\t\t};\n\t}\n\n\treturn {\n\t\tresponse: {\n\t\t\ttext: response,\n\t\t},\n\t};\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAKO,SAAS,eAAe,UAAmB,uBAA6C;AAC9F,MAAI,OAAO,aAAa,UAAU;AACjC,WAAO;AAAA,MACN,MAAM,SAAS,KAAK;AAAA,IACrB;AAAA,EACD;AAEA,MAAI,MAAM,QAAQ,QAAQ,GAAG;AAC5B,WAAO;AAAA,MACN,MAAM;AAAA,IACP;AAAA,EACD;AAEA,MAAI,oBAAoB,QAAQ;AAC/B,QAAI,uBAAuB;AAC1B,aAAO;AAAA,IACR;AAIA,WAAO;AAAA,MACN,MAAM,KAAK,UAAU,QAAQ;AAAA,IAC9B;AAAA,EACD;AAEA,SAAO;AAAA,IACN,UAAU;AAAA,MACT,MAAM;AAAA,IACP;AAAA,EACD;AACD;","names":[]}