{"version":3,"sources":["../../../../../nodes/vector_store/shared/createVectorStoreNode/utils.ts"],"sourcesContent":["import type { VectorStore } from '@langchain/core/vectorstores';\nimport type { INodeProperties, INodePropertyOptions } from 'n8n-workflow';\n\nimport { DEFAULT_OPERATION_MODES, OPERATION_MODE_DESCRIPTIONS } from './constants';\nimport type { NodeOperationMode, VectorStoreNodeConstructorArgs } from './types';\n\n/**\n * Transforms field descriptions to show only for specific operation modes\n * This function adds displayOptions to each field to make it appear only for specified modes\n */\nexport function transformDescriptionForOperationMode(\n\tfields: INodeProperties[],\n\tmode: NodeOperationMode | NodeOperationMode[],\n): INodeProperties[] {\n\treturn fields.map((field) => ({\n\t\t...field,\n\t\tdisplayOptions: { show: { mode: Array.isArray(mode) ? mode : [mode] } },\n\t}));\n}\n\n/**\n * Checks if the update operation is supported for a specific vector store\n * A vector store supports updates if it explicitly includes 'update' in its operationModes\n */\nexport function isUpdateSupported<T extends VectorStore>(\n\targs: VectorStoreNodeConstructorArgs<T>,\n): boolean {\n\treturn args.meta.operationModes?.includes('update') ?? false;\n}\n\n/**\n * Returns the operation mode options enabled for a specific vector store\n * Filters the full list of operation modes based on what's enabled for this vector store\n */\nexport function getOperationModeOptions<T extends VectorStore>(\n\targs: VectorStoreNodeConstructorArgs<T>,\n): INodePropertyOptions[] {\n\tconst enabledOperationModes = args.meta.operationModes ?? DEFAULT_OPERATION_MODES;\n\n\treturn OPERATION_MODE_DESCRIPTIONS.filter(({ value }) =>\n\t\tenabledOperationModes.includes(value as NodeOperationMode),\n\t);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,uBAAqE;AAO9D,SAAS,qCACf,QACA,MACoB;AACpB,SAAO,OAAO,IAAI,CAAC,WAAW;AAAA,IAC7B,GAAG;AAAA,IACH,gBAAgB,EAAE,MAAM,EAAE,MAAM,MAAM,QAAQ,IAAI,IAAI,OAAO,CAAC,IAAI,EAAE,EAAE;AAAA,EACvE,EAAE;AACH;AAMO,SAAS,kBACf,MACU;AACV,SAAO,KAAK,KAAK,gBAAgB,SAAS,QAAQ,KAAK;AACxD;AAMO,SAAS,wBACf,MACyB;AACzB,QAAM,wBAAwB,KAAK,KAAK,kBAAkB;AAE1D,SAAO,6CAA4B;AAAA,IAAO,CAAC,EAAE,MAAM,MAClD,sBAAsB,SAAS,KAA0B;AAAA,EAC1D;AACD;","names":[]}