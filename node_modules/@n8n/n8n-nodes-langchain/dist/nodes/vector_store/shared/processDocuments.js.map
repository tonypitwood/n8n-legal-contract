{"version":3,"sources":["../../../../nodes/vector_store/shared/processDocuments.ts"],"sourcesContent":["import type { Document } from '@langchain/core/documents';\nimport type { INodeExecutionData } from 'n8n-workflow';\n\nimport { N8nBinaryLoader } from '@utils/N8nBinaryLoader';\nimport { N8nJsonLoader } from '@utils/N8nJsonLoader';\n\nexport async function processDocuments(\n\tdocumentInput: N8nJsonLoader | N8nBinaryLoader | Array<Document<Record<string, unknown>>>,\n\tinputItems: INodeExecutionData[],\n) {\n\tlet processedDocuments: Document[];\n\n\tif (documentInput instanceof N8nJsonLoader || documentInput instanceof N8nBinaryLoader) {\n\t\tprocessedDocuments = await documentInput.processAll(inputItems);\n\t} else {\n\t\tprocessedDocuments = documentInput;\n\t}\n\n\tconst serializedDocuments = processedDocuments.map(({ metadata, pageContent }) => ({\n\t\tjson: { metadata, pageContent },\n\t}));\n\n\treturn {\n\t\tprocessedDocuments,\n\t\tserializedDocuments,\n\t};\n}\nexport async function processDocument(\n\tdocumentInput: N8nJsonLoader | N8nBinaryLoader | Array<Document<Record<string, unknown>>>,\n\tinputItem: INodeExecutionData,\n\titemIndex: number,\n) {\n\tlet processedDocuments: Document[];\n\n\tif (documentInput instanceof N8nJsonLoader || documentInput instanceof N8nBinaryLoader) {\n\t\tprocessedDocuments = await documentInput.processItem(inputItem, itemIndex);\n\t} else {\n\t\tprocessedDocuments = documentInput;\n\t}\n\n\tconst serializedDocuments = processedDocuments.map(({ metadata, pageContent }) => ({\n\t\tjson: { metadata, pageContent },\n\t\tpairedItem: {\n\t\t\titem: itemIndex,\n\t\t},\n\t}));\n\n\treturn {\n\t\tprocessedDocuments,\n\t\tserializedDocuments,\n\t};\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,6BAAgC;AAChC,2BAA8B;AAE9B,eAAsB,iBACrB,eACA,YACC;AACD,MAAI;AAEJ,MAAI,yBAAyB,sCAAiB,yBAAyB,wCAAiB;AACvF,yBAAqB,MAAM,cAAc,WAAW,UAAU;AAAA,EAC/D,OAAO;AACN,yBAAqB;AAAA,EACtB;AAEA,QAAM,sBAAsB,mBAAmB,IAAI,CAAC,EAAE,UAAU,YAAY,OAAO;AAAA,IAClF,MAAM,EAAE,UAAU,YAAY;AAAA,EAC/B,EAAE;AAEF,SAAO;AAAA,IACN;AAAA,IACA;AAAA,EACD;AACD;AACA,eAAsB,gBACrB,eACA,WACA,WACC;AACD,MAAI;AAEJ,MAAI,yBAAyB,sCAAiB,yBAAyB,wCAAiB;AACvF,yBAAqB,MAAM,cAAc,YAAY,WAAW,SAAS;AAAA,EAC1E,OAAO;AACN,yBAAqB;AAAA,EACtB;AAEA,QAAM,sBAAsB,mBAAmB,IAAI,CAAC,EAAE,UAAU,YAAY,OAAO;AAAA,IAClF,MAAM,EAAE,UAAU,YAAY;AAAA,IAC9B,YAAY;AAAA,MACX,MAAM;AAAA,IACP;AAAA,EACD,EAAE;AAEF,SAAO;AAAA,IACN;AAAA,IACA;AAAA,EACD;AACD;","names":[]}