{"version":3,"sources":["../../../../../nodes/vendors/OpenAi/actions/versionDescription.ts"],"sourcesContent":["/* eslint-disable n8n-nodes-base/node-filename-against-convention */\nimport type { INodeInputConfiguration, INodeTypeDescription } from 'n8n-workflow';\nimport { NodeConnectionTypes } from 'n8n-workflow';\n\nimport * as assistant from './assistant';\nimport * as audio from './audio';\nimport * as file from './file';\nimport * as image from './image';\nimport * as text from './text';\n\nconst prettifyOperation = (resource: string, operation: string) => {\n\tif (operation === 'deleteAssistant') {\n\t\treturn 'Delete Assistant';\n\t}\n\n\tif (operation === 'deleteFile') {\n\t\treturn 'Delete File';\n\t}\n\n\tif (operation === 'classify') {\n\t\treturn 'Classify Text';\n\t}\n\n\tif (operation === 'message' && resource === 'text') {\n\t\treturn 'Message Model';\n\t}\n\n\tconst capitalize = (str: string) => {\n\t\tconst chars = str.split('');\n\t\tchars[0] = chars[0].toUpperCase();\n\t\treturn chars.join('');\n\t};\n\n\tif (['transcribe', 'translate'].includes(operation)) {\n\t\tresource = 'recording';\n\t}\n\n\tif (operation === 'list') {\n\t\tresource = resource + 's';\n\t}\n\n\treturn `${capitalize(operation)} ${capitalize(resource)}`;\n};\n\nconst configureNodeInputs = (\n\tresource: string,\n\toperation: string,\n\thideTools: string,\n\tmemory: string | undefined,\n) => {\n\tif (resource === 'assistant' && operation === 'message') {\n\t\tconst inputs: INodeInputConfiguration[] = [\n\t\t\t{ type: 'main' },\n\t\t\t{ type: 'ai_tool', displayName: 'Tools' },\n\t\t];\n\t\tif (memory !== 'threadId') {\n\t\t\tinputs.push({ type: 'ai_memory', displayName: 'Memory', maxConnections: 1 });\n\t\t}\n\t\treturn inputs;\n\t}\n\tif (resource === 'text' && operation === 'message') {\n\t\tif (hideTools === 'hide') {\n\t\t\treturn ['main'];\n\t\t}\n\t\treturn [{ type: 'main' }, { type: 'ai_tool', displayName: 'Tools' }];\n\t}\n\n\treturn ['main'];\n};\n\nexport const versionDescription: INodeTypeDescription = {\n\tdisplayName: 'OpenAI',\n\tname: 'openAi',\n\ticon: { light: 'file:openAi.svg', dark: 'file:openAi.dark.svg' },\n\tgroup: ['transform'],\n\tversion: [1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8],\n\tsubtitle: `={{(${prettifyOperation})($parameter.resource, $parameter.operation)}}`,\n\tdescription: 'Message an assistant or GPT, analyze images, generate audio, etc.',\n\tdefaults: {\n\t\tname: 'OpenAI',\n\t},\n\tcodex: {\n\t\talias: ['LangChain', 'ChatGPT', 'DallE', 'whisper', 'audio', 'transcribe', 'tts', 'assistant'],\n\t\tcategories: ['AI'],\n\t\tsubcategories: {\n\t\t\tAI: ['Agents', 'Miscellaneous', 'Root Nodes'],\n\t\t},\n\t\tresources: {\n\t\t\tprimaryDocumentation: [\n\t\t\t\t{\n\t\t\t\t\turl: 'https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-langchain.openai/',\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n\tinputs: `={{(${configureNodeInputs})($parameter.resource, $parameter.operation, $parameter.hideTools, $parameter.memory ?? undefined)}}`,\n\toutputs: [NodeConnectionTypes.Main],\n\tcredentials: [\n\t\t{\n\t\t\tname: 'openAiApi',\n\t\t\trequired: true,\n\t\t},\n\t],\n\tproperties: [\n\t\t{\n\t\t\tdisplayName: 'Resource',\n\t\t\tname: 'resource',\n\t\t\ttype: 'options',\n\t\t\tnoDataExpression: true,\n\t\t\t// eslint-disable-next-line n8n-nodes-base/node-param-options-type-unsorted-items\n\t\t\toptions: [\n\t\t\t\t{\n\t\t\t\t\tname: 'Assistant',\n\t\t\t\t\tvalue: 'assistant',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Text',\n\t\t\t\t\tvalue: 'text',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Image',\n\t\t\t\t\tvalue: 'image',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Audio',\n\t\t\t\t\tvalue: 'audio',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'File',\n\t\t\t\t\tvalue: 'file',\n\t\t\t\t},\n\t\t\t],\n\t\t\tdefault: 'text',\n\t\t},\n\t\t...assistant.description,\n\t\t...audio.description,\n\t\t...file.description,\n\t\t...image.description,\n\t\t...text.description,\n\t],\n};\n"],"mappings":"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","names":[]}