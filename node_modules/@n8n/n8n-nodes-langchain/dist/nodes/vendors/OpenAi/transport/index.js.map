{"version":3,"sources":["../../../../../nodes/vendors/OpenAi/transport/index.ts"],"sourcesContent":["import type {\n\tIDataObject,\n\tIExecuteFunctions,\n\tIHttpRequestMethods,\n\tILoadOptionsFunctions,\n} from 'n8n-workflow';\ntype RequestParameters = {\n\theaders?: IDataObject;\n\tbody?: IDataObject | string;\n\tqs?: IDataObject;\n\turi?: string;\n\toption?: IDataObject;\n};\n\nexport async function apiRequest(\n\tthis: IExecuteFunctions | ILoadOptionsFunctions,\n\tmethod: IHttpRequestMethods,\n\tendpoint: string,\n\tparameters?: RequestParameters,\n) {\n\tconst { body, qs, option } = parameters ?? {};\n\n\tconst credentials = await this.getCredentials('openAiApi');\n\n\tlet uri = `https://api.openai.com/v1${endpoint}`;\n\tlet headers = parameters?.headers ?? {};\n\tif (credentials.url) {\n\t\turi = `${credentials?.url}${endpoint}`;\n\t}\n\n\tif (\n\t\tcredentials.header &&\n\t\ttypeof credentials.headerName === 'string' &&\n\t\tcredentials.headerName &&\n\t\ttypeof credentials.headerValue === 'string'\n\t) {\n\t\theaders = {\n\t\t\t...headers,\n\t\t\t[credentials.headerName]: credentials.headerValue,\n\t\t};\n\t}\n\n\tconst options = {\n\t\theaders,\n\t\tmethod,\n\t\tbody,\n\t\tqs,\n\t\turi,\n\t\tjson: true,\n\t};\n\n\tif (option && Object.keys(option).length !== 0) {\n\t\tObject.assign(options, option);\n\t}\n\n\treturn await this.helpers.requestWithAuthentication.call(this, 'openAiApi', options);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA,eAAsB,WAErB,QACA,UACA,YACC;AACD,QAAM,EAAE,MAAM,IAAI,OAAO,IAAI,cAAc,CAAC;AAE5C,QAAM,cAAc,MAAM,KAAK,eAAe,WAAW;AAEzD,MAAI,MAAM,4BAA4B,QAAQ;AAC9C,MAAI,UAAU,YAAY,WAAW,CAAC;AACtC,MAAI,YAAY,KAAK;AACpB,UAAM,GAAG,aAAa,GAAG,GAAG,QAAQ;AAAA,EACrC;AAEA,MACC,YAAY,UACZ,OAAO,YAAY,eAAe,YAClC,YAAY,cACZ,OAAO,YAAY,gBAAgB,UAClC;AACD,cAAU;AAAA,MACT,GAAG;AAAA,MACH,CAAC,YAAY,UAAU,GAAG,YAAY;AAAA,IACvC;AAAA,EACD;AAEA,QAAM,UAAU;AAAA,IACf;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,MAAM;AAAA,EACP;AAEA,MAAI,UAAU,OAAO,KAAK,MAAM,EAAE,WAAW,GAAG;AAC/C,WAAO,OAAO,SAAS,MAAM;AAAA,EAC9B;AAEA,SAAO,MAAM,KAAK,QAAQ,0BAA0B,KAAK,MAAM,aAAa,OAAO;AACpF;","names":[]}